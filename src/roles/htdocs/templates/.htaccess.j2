# mod_rewrite
<IfModule mod_rewrite.c>

    # Enable mod_rewrite engine
    RewriteEngine on

    RewriteBase /

    # This is needed for Links inside MS Office documents to resolve properly
    # when using single sign on.
    # Ref: https://groups.google.com/forum/#!topic/simplesamlphp/LcykPSQj_IQ
    RewriteCond %{HTTP_USER_AGENT} ms-office [NC]
    RewriteRule ^ - [L,R=200]

    # Allow access to root index.php
    RewriteRule ^index.php(.*) - [L]

    # Allow access to /wikis directory (where all wiki content and
    # and settings are located)
    RewriteRule ^wikis(?:/|$)(.*)$ - [L]

    # Allow access to WikiBlender landing page and support files
    RewriteRule ^WikiBlender(?:/|$)(.*)$ - [L]

    # Allow access to ServerPerformance plot page and support files
    RewriteRule ^ServerPerformance(?:/|$)(.*)$ - [L]

    {% if allow_backup_downloads %}
    # Allow access to BackupDownload function
    RewriteRule ^BackupDownload(?:/|$)(.*)$ - [L]
    {% endif %}

    # from https://www.mediawiki.org/wiki/Manual:Short_URL/Apache
    RewriteRule ^/?wiki(/.*)?$ %{DOCUMENT_ROOT}/w/index.php [L]

    # cleanup the mess of path-based wikis
    RewriteRule ^/?lol(/.*)?$ /w$1 [R=permanent,L]
    RewriteRule ^/?cod(/.*)?$ /w$1 [R=permanent,L]
    RewriteRule ^/?halo(/.*)?$ /w$1 [R=permanent,L]
    RewriteRule ^/?smite(/.*)?$ /w$1 [R=permanent,L]

    # naked and www are not wikis - show the splash page
    RewriteCond %{HTTP_HOST} ^www\.esportspedia\.com$  [OR]
    RewriteCond %{HTTP_HOST} ^esportspedia\.com$
    RewriteRule ^$ index.php
    RewriteCond %{HTTP_HOST} ^www\.esportpedia\.com$  [OR]
    RewriteCond %{HTTP_HOST} ^esportpedia\.com$
    RewriteRule ^$ index.php

    # Primary wiki redirector for any bare sub-domain:  
    RewriteRule ^$ /w/index.php


</IfModule>
